<%- include("../partials/header") %>
<%- include("../partials/sidebar") %>


<div class="content" id="content">
  <h1>Titles</h1>
  <a class="btn btn-add" href="/admin/titles/add">+ Add</a>

  <% if (titles && titles.length > 0) { %>
    <div class="skills-container">
      <% titles.forEach(title => { %>
        <div class="skill-item" data-title-id="<%= title.id %>">
          <div class="skill-header">
            <span class="skill-title"><%= title.title %></span>
          </div>
          <div class="skill-actions">
            <a href="/admin/titles/edit/<%=title.id%>" class="btn btn-edit")">Edit</a>
            <a href="#" 
   class="btn btn-delete" 
   onclick="if(confirm('Are you sure you want to delete this skill?')) { 
              fetch('/admin/titles/delete/<%= title.id %>', { method: 'POST' })
                .then(() => location.reload())
                .catch(err => alert('Error deleting skill'));
            } 
            return false;">
   Delete
</a>

          </div>
        </div>
      <% }) %>
    </div>
  <% } else { %>
    <p style="color:#bbb;">No title added yet.</p>
  <% } %>

</div>

<% if (success) { %>
<script>
  iziToast.success({
    title: 'Success',
    message: <%- JSON.stringify(success) %>,
    timeout: 5000,

    // CUSTOM SIZE
    maxWidth: 500,       // increase width (default ~350px)
    titleSize: '24px',   // bigger title font
    messageSize: '18px', // bigger message font
    padding: 30,         // more padding inside toast
    balloon: true,       // optional: makes it more prominent
  });
</script>
<% } %>

<% if (error) { %>
<script>
  iziToast.error({
    title: 'Error',
    message: <%- JSON.stringify(error) %>,
    timeout: 5000,

    // CUSTOM SIZE
    maxWidth: 500,       // increase width (default ~350px)
    titleSize: '24px',   // bigger title font
    messageSize: '18px', // bigger message font
    padding: 30,         // more padding inside toast
    balloon: true,       // optional: makes it more prominent
  });
</script>
<% } %>


<%- include("../partials/footer") %>
