<%- include("../partials/header") %>
<%- include("../partials/sidebar") %>

<div class="content" id="content">
  <h1>User Studies / Education</h1>

  <a class="btn-add" href="/admin/educations/add" id="addStudyBtn">+ Add Study</a>

  <div class="studies-container">
    <% studies?.forEach((study, index) => { %>
      <div class="study-item">
        <div class="study-header">
          <h3><%= study.educationName %> <%= study.degree ? '(' + study.degree + ')' : '' %></h3>
       
        </div>
        <p class="study-duration">
          <% 
            const start = new Date(study.startDate);
            const end = study.endDate ? new Date(study.endDate) : null;

            const options = { year: 'numeric', month: 'long' };
            const startFormatted = !isNaN(start) ? start.toLocaleDateString('en-US', options) : '';
            const endFormatted = end && !isNaN(end) ? end.toLocaleDateString('en-US', options) : 'Present';
          %>
          <%= startFormatted %> - <%= endFormatted %>
        </p>
        
        <p class="study-description"><%= study.description %></p>
           <div>
            <a class="btn-edit" href="/admin/educations/edit/<%=study.id%>">Edit</a>
           <a href="#" 
   class="btn-delete" 
   onclick="if(confirm('Are you sure you want to delete this education?')) { 
              fetch('/admin/education/delete/<%= study.id %>', { method: 'POST' })
                .then(() => location.reload())
                .catch(err => alert('Error deleting education'));
            } 
            return false;">
   Delete
</a>

          </div>
      </div>
      
    <% }) %>
  </div>
</div>

<%- include("../partials/footer") %>